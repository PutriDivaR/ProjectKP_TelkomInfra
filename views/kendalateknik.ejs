<%- include('layout/header') %>
<%- include('layout/sidebar') %>

<div class="main">
  <!-- TOPBAR -->
  <div class="topbar">
    <h2>Daerah Wilayah Ridar</h2>
    <div>
      <button class="btn" onclick="openModal()">+ Tambah Kendala Teknik</button>
    </div>
  </div>

  <!-- KENDALA TEKNIK CARD -->
  <div class="card">
    <div class="card-header">
      <h3>Master Activity - Kendala Teknik</h3>
    </div>

    <div style="overflow-x:auto">
      <table class="table">
        <thead>
          <tr>
            <th style="width:60px">NO</th>
            <th>ACTIVITY NAME</th>
            <th style="width:140px">STATUS</th>
            <th style="width:120px">PROGRESS</th>
            <th>SOLUSI / PROGRESS</th>
            <th style="width:120px">AKSI</th>
          </tr>
        </thead>
        <tbody id="dataTable">
          <tr>
            <td colspan="6" style="text-align:center">
              <div class="loading">Loading data...</div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- MODAL FORM (tetap, tapi diletakkan di bawah main) -->
<div class="modal-overlay" id="modalOverlay" onclick="closeModalOnOverlay(event)">
  <div class="modal">
    <div class="modal-header">
      <h3 id="modalTitle">Tambah Kendala Teknik</h3>
      <button class="close-btn" onclick="closeModal()">&times;</button>
    </div>

    <div class="modal-body">
      <form id="activityForm" onsubmit="event.preventDefault(); saveData();">
        <input type="hidden" id="activityId">

        <div class="form-row">
          <label>ACTIVITY DAN ACTIVITY TEKNISI <span style="color:red">*</span></label>
          <input type="text" id="activityName" placeholder="BENJAR ODP | DONE" required>
          <small>Format: ACTIVITY | STATUS TEKNISI</small>
        </div>

        <div class="form-row">
          <label>STATUS <span style="color:red">*</span></label>
          <select id="statusDefault" required>
            <option value="">-- Pilih Status --</option>
            <option value="PINDAH LOKER">PINDAH LOKER</option>
            <option value="OGP">OGP</option>
            <option value="OPEN">OPEN</option>
            <option value="COMPLETED">COMPLETED</option>
          </select>
        </div>

        <div class="form-row">
          <label>PROGRESS <span style="color:red">*</span></label>
          <input type="number" step="0.1" min="0" max="1" id="progressDefault" required>
          <small>Nilai 0 â€“ 1 (contoh: 0.5, 1)</small>
        </div>

        <div class="form-row">
          <label>SOLUSI / PROGRESS <span style="color:red">*</span></label>
          <textarea id="solusiDefault" rows="3" required></textarea>
        </div>
      </form>
    </div>

    <div class="modal-footer">
      <button class="btn secondary" onclick="closeModal()">Batal</button>
      <button id="saveBtn" class="btn" onclick="saveData()">Simpan</button>
    </div>
  </div>
</div>

<script src="/js/kendalateknik.js"></script>

<%- include('layout/footer') %>
